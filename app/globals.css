@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Base ---------- */
html, body { height: 100%; }

body {
  background: rgb(255 255 255);               /* fallback for when bg layer hasn't mounted */
  color: rgb(17 24 39);                        /* slate-900-ish for light mode */
}

.dark body {
  background: rgb(3 7 18);                    /* slate-950-ish */
  color: rgb(229 231 235);
}

/* ---------- Helpers / Utilities ---------- */
.section { @apply py-16 md:py-24; }

.h1 { @apply text-3xl md:text-5xl font-bold leading-tight; }
.h2 { @apply text-2xl md:text-4xl font-semibold; }
.mono { @apply font-mono text-sm tracking-tight opacity-80; }

.card {
  @apply rounded-2xl border border-black/5 dark:border-white/10
         bg-white/60 dark:bg-white/5 backdrop-blur p-6 shadow-sm;
}

/* Code block light-mode helpers */
.code-wrapper { position: relative; }
.code-colored { display: block; }
.reveal-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
  pointer-events: none;
  transition: width 240ms linear;
}
.caret {
  position: absolute;
  top: 0.6rem;
  width: 2px;
  height: calc(100% - 1.2rem);
  background: rgba(17,24,39,0.85);
  box-shadow: 0 0 8px rgba(99,102,241,0.6);
  transform: translateX(-1px);
  transition: left 120ms linear;
}

/* Dark mode variants for the reveal and caret */
.dark .reveal-overlay { background: linear-gradient(90deg, rgba(3,7,18,0.7), rgba(3,7,18,0.95)); }
.dark .caret { background: rgba(255,255,255,0.85); box-shadow: 0 0 8px rgba(56,189,248,0.55); }

.sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; }

.btn {
  @apply inline-flex items-center gap-2 rounded-full px-4 py-2
         border border-black/10 dark:border-white/10
         hover:-translate-y-0.5 transition shadow-sm;
}

/* ---------- Night grid background ---------- */
:root{
  --grid-size: 72px;               /* cell size */
  --grid-alpha: 0.045;             /* line strength (0.03â€“0.06 looks nice) */
  --grid-rgb: 255 255 255;         /* white grid lines with low alpha */
  --bg-rgb: 7 11 24;               /* deep navy base */
  --spot-rgb: 64 80 255;           /* blue glow */
}

.bg-night-grid{
  background-color: rgb(var(--bg-rgb));
  background-image:
    /* grid lines */
    repeating-linear-gradient(0deg,
      rgba(var(--grid-rgb) / var(--grid-alpha)) 0 1px,
      transparent 1px var(--grid-size)
    ),
    repeating-linear-gradient(90deg,
      rgba(var(--grid-rgb) / var(--grid-alpha)) 0 1px,
      transparent 1px var(--grid-size)
    ),
    /* blue spotlight in the top-left */
    radial-gradient(600px 420px at 12% 8%,
      rgba(var(--spot-rgb) / .35) 0,
      rgba(var(--spot-rgb) / 0) 60%
    ),
    /* subtle vignette from far top-right */
    radial-gradient(1000px 800px at 120% -10%,
      rgba(0 0 0 / .5) 0,
      rgba(0 0 0 / 0) 60%
    );
  background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;
  background-attachment: fixed;
}

/* Optional: softly vignette the background layer itself (not your content) */
.bg-night-grid-fade{
  mask-image: radial-gradient(1200px 900px at 50% 40%, black 55%, transparent 100%);
  -webkit-mask-image: radial-gradient(1200px 900px at 50% 40%, black 55%, transparent 100%);
}

/* Mobile perf: avoid fixed backgrounds on small screens */
@media (max-width: 768px){
  .bg-night-grid{ background-attachment: scroll; }
}
